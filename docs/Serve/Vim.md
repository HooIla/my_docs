# Vim

## 基本操作

```
# 模式切换
i 输入模式 (在光标前插入)
I 行首输入模式
a 在光标后插入
A 行末插入
o 下一行输入
O 上一行输入
ESC 退出输入模式到命令模式

# 退出和保存
:q 退出
:q! 强制退出不保存
:w 保存
:wq 保存并退出
:x 保存并退出
ZZ 快速保存退出
```

## 光标移动

```
# 基本移动
h 左移
j 下移
k 上移
l 右移
w 移动到下一个单词开头
b 移动到上一个单词开头
e 移动到当前单词结尾

# 行内移动
0 行首
^ 行首第一个非空字符
$ 行末
f{char} 跳转到当前行下一个指定字符
F{char} 跳转到当前行上一个指定字符

# 页面移动
gg 文件首行
G 文件末行
{num}G 跳转到第num行
H 屏幕顶部
M 屏幕中间
L 屏幕底部
Ctrl+f 下一页
Ctrl+b 上一页
Ctrl+d 向下滚动半页
Ctrl+u 向上滚动半页
```

## 编辑操作

```
# 删除 (剪切)
x 删除光标下字符
X 删除光标前字符
dd 删除当前行
3dd 删除3行
dw 删除一个单词
d$ 删除到行末
d0 删除到行首
D 删除到行末

# 复制
yy 复制当前行
3yy 复制3行
yw 复制一个单词
y$ 复制到行末

# 粘贴
p 在光标后粘贴
P 在光标前粘贴

# 撤销和重做
u 撤销
Ctrl+r 重做
. 重复上一个操作
```

## 查找和替换

```
# 查找
/pattern 向前搜索
?pattern 向后搜索
n 下一个匹配
N 上一个匹配
* 搜索当前光标下的单词(向前)
# 搜索当前光标下的单词(向后)

# 替换
:s/old/new 替换当前行第一个
:s/old/new/g 替换当前行所有
:%s/old/new 替换所有行第一个
:%s/old/new/g 替换文件中所有
:%s/old/new/gc 替换时询问确认
```

## 视觉模式

```
v 字符选择模式
V 行选择模式
Ctrl+v 块选择模式

# 在视觉模式下
d 删除选中内容
y 复制选中内容
c 删除选中内容并进入插入模式
> 向右缩进
< 向左缩进
```

## 设置和配置

```
:set nu 显示行号
:set nonu 取消显示行号
:set hlsearch 高亮搜索结果
:set nohl 取消搜索高亮
:set ic 忽略大小写搜索
:set noic 区分大小写搜索
:syntax on 开启语法高亮
:syntax off 关闭语法高亮
```

## 多文件操作

```
# 打开文件
:e filename 编辑新文件
:tabnew filename 在新标签页打开文件

# 分屏
:split 水平分屏
:vsplit 垂直分屏
Ctrl+w+h 移动到左窗口
Ctrl+w+j 移动到下窗口
Ctrl+w+k 移动到上窗口
Ctrl+w+l 移动到右窗口
Ctrl+w+q 关闭当前窗口

# 标签页
:tabn 下一个标签页
:tabp 上一个标签页
:tabclose 关闭当前标签页
```

## 实用技巧

```
# 快速定位
% 匹配括号
]] 下一个函数
[[ 上一个函数
'' 返回上次位置

# 批量编辑
qa 开始录制宏a
q 结束录制
@a 执行宏a
@@ 重复执行上次宏

# 命令行
:! command 执行shell命令
:r filename 读入文件内容
:w filename 另存为文件
```